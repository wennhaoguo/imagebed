# NeRF and Slam

## Principle of NeRF

- 将每个像素对应射线上一组采样点（可以通过对应的相机位姿计算得到）和60维的位置编码拼接起来，作为模型的输入，模型就可以推理出每个采样点对应的不透明度和颜色。在网络的前面大部分层用来训练不透明度值，因为认为不透明度和观测位置无关，所以一开始的输入只有采样点的位置，在后面几层再输入采样点的观测角度和对应的位置编码，来训练颜色值，这里应该是认为不同位置观测时由于光照原因导致颜色值有一些差距？在计算loss的时候首先求一个当前射线上的积分值，这个积分值代表像素的颜色值和不透明度值，然后和原图像求均方差。之后反向传播更新参数

引入位置编码

采用频率变换来做位置编码，为的是**避免空间相邻采样点在MLP表示中的过平滑问题**。比如位置(237, 332, 198)和位置(237,332,199)这两个点作为MLP的输入，MLP可能对个位不够敏感，导致输出过平滑的问题。通过十种不同的频率对输入信息进行编码，然后输入到网络中，这样就更容易区分位置信息，能够对图像实现更准确的重建

通过对观测射线方向上的点进行积分，在第一次出现波峰的时候，确定像素点的着色，输出不透明度和RGB值

计算第一个波峰所对应的颜色和不透明度值

通过这种方式来把三维模型储存在网络中，在输入其他角度的时候，就可以看到期望的图片

# NeRF 2 TRF

用神经网络代替场景表示和渲染模块

场景表示模块指的应该是前面求得每个采样点